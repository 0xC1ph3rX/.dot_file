local keys = {
	-- Top Pickers & Explorer (optimized for home row)
	{
		"<leader>f",
		function()
			Snacks.picker.smart()
		end,
		desc = "Smart Find Files",
	},
	{
		"<leader>b",
		function()
			Snacks.picker.buffers()
		end,
		desc = "Buffers",
	},
	{
		"<leader> ",
		function()
			Snacks.picker.grep()
		end,
		desc = "Live Grep",
	},
	{
		"<leader>h",
		function()
			Snacks.picker.command_history()
		end,
		desc = "Command History",
	},
	{
		"<leader>n",
		function()
			Snacks.explorer()
		end,
		desc = "File Explorer",
	},
	-- Find (optimized shortcuts)
	{
		"<leader>ff",
		function()
			Snacks.picker.files()
		end,
		desc = "Find Files",
	},
	{
		"<leader>fr",
		function()
			Snacks.picker.recent()
		end,
		desc = "Recent Files",
	},
	{
		"<leader>fc",
		function()
			Snacks.picker.files({ cwd = vim.fn.stdpath("config") })
		end,
		desc = "Find Config File",
	},
	{
		"<leader>fg",
		function()
			Snacks.picker.git_files()
		end,
		desc = "Find Git Files",
	},
	-- Git (home row optimized)
	{
		"<leader>gb",
		function()
			Snacks.picker.git_branches()
		end,
		desc = "Git Branches",
	},
	{
		"<leader>gl",
		function()
			Snacks.picker.git_log()
		end,
		desc = "Git Log",
	},
	{
		"<leader>gs",
		function()
			Snacks.picker.git_status()
		end,
		desc = "Git Status",
	},
	{
		"<leader>gd",
		function()
			Snacks.picker.git_diff()
		end,
		desc = "Git Diff (Hunks)",
	},
	{
		"<leader>gf",
		function()
			Snacks.picker.git_log_file()
		end,
		desc = "Git Log File",
	},
	-- Search (simplified and ergonomic)
	{
		"<leader>sw",
		function()
			Snacks.picker.grep_word()
		end,
		desc = "Search Word Under Cursor",
		mode = { "n", "x" },
	},
	{
		"<leader>sl",
		function()
			Snacks.picker.lines()
		end,
		desc = "Search Buffer Lines",
	},
	{
		"<leader>sh",
		function()
			Snacks.picker.help()
		end,
		desc = "Help Pages",
	},
	{
		"<leader>sM",
		function()
			-- Comprehensive manual browser with MinilibX support
			Snacks.terminal({
				"bash", "-c", 
				'{ /usr/bin/man -k . 2>/dev/null; find /usr/include/minilibx-linux/man -name "*.3" 2>/dev/null | while read f; do n=$(basename "$f" .3); echo "$n (3) - MinilibX function"; done; } | sort | uniq | /home/ehamza/.fzf/bin/fzf --prompt="All Manuals> " | { read sel; if [ ! -z "$sel" ]; then page=$(echo "$sel" | /usr/bin/awk "{print \\$1}"); /usr/bin/man "$page" 2>/dev/null || /usr/bin/man -M /usr/include/minilibx-linux/man "$page"; fi; }'
			}, {
				win = {
					position = "float",
					height = 0.9,
					width = 0.9,
				}
			})
		end,
		desc = "All Manuals",
	},
	{
		"<leader>sk",
		function()
			Snacks.picker.keymaps()
		end,
		desc = "Keymaps",
	},
	{
		"<leader>sd",
		function()
			Snacks.picker.diagnostics()
		end,
		desc = "Diagnostics",
	},
	{
		"<leader>sr",
		function()
			Snacks.picker.resume()
		end,
		desc = "Resume Last Search",
	},

	-- LSP & Core Functions (ergonomic)
	{
		"<leader>ls",
		function()
			Snacks.picker.lsp_symbols()
		end,
		desc = "LSP Document Symbols",
	},
	{
		"<leader>lw",
		function()
			Snacks.picker.lsp_workspace_symbols()
		end,
		desc = "LSP Workspace Symbols",
	},
	{
		"gm",
		function()
			-- Go to man page for word under cursor
			local word = vim.fn.expand("<cword>")
			if word and word ~= "" then
				-- Try to open man page for the word under cursor
				Snacks.terminal({
					"bash", "-c", 
					string.format('if /usr/bin/man "%s" >/dev/null 2>&1; then /usr/bin/man "%s"; elif /usr/bin/man -M /usr/include/minilibx-linux/man "%s" >/dev/null 2>&1; then /usr/bin/man -M /usr/include/minilibx-linux/man "%s"; else echo "No manual found for: %s"; echo "Press Enter to continue..."; read; fi', word, word, word, word, word)
				}, {
					win = {
						position = "float",
						height = 0.9,
						width = 0.9,
					}
				})
			else
				print("No word under cursor")
			end
		end,
		desc = "Go to Manual (word under cursor)",
	},
	
	-- Go Development (Debug & Utilities)
	{
		"<leader>db",
		"<cmd>DapToggleBreakpoint<CR>",
		desc = "Debug: Toggle Breakpoint",
		ft = { "go" },
	},
	{
		"<leader>dc",
		"<cmd>DapContinue<CR>",
		desc = "Debug: Continue",
		ft = { "go" },
	},
	{
		"<leader>di",
		"<cmd>DapStepInto<CR>",
		desc = "Debug: Step Into",
		ft = { "go" },
	},
	{
		"<leader>do",
		"<cmd>DapStepOver<CR>",
		desc = "Debug: Step Over", 
		ft = { "go" },
	},
	{
		"<leader>dO",
		"<cmd>DapStepOut<CR>",
		desc = "Debug: Step Out",
		ft = { "go" },
	},
	{
		"<leader>dr",
		"<cmd>DapRepl<CR>",
		desc = "Debug: Open REPL",
		ft = { "go" },
	},
	{
		"<leader>dus",
		function()
			local widgets = require("dap.ui.widgets")
			local sidebar = widgets.sidebar(widgets.scopes)
			sidebar.open()
		end,
		desc = "Debug: Open Sidebar",
		ft = { "go" },
	},
	{
		"<leader>dgt",
		function()
			require("dap-go").debug_test()
		end,
		desc = "Debug: Go Test",
		ft = { "go" },
	},
	{
		"<leader>dgl",
		function()
			require("dap-go").debug_last()
		end,
		desc = "Debug: Go Last Test",
		ft = { "go" },
	},
	{
		"<leader>gsj",
		"<cmd>GoTagAdd json<CR>",
		desc = "Go: Add JSON tags",
		ft = { "go" },
	},
	{
		"<leader>gsy",
		"<cmd>GoTagAdd yaml<CR>",
		desc = "Go: Add YAML tags", 
		ft = { "go" },
	},
	{
		"<leader>gst",
		"<cmd>GoTagRm<CR>",
		desc = "Go: Remove tags",
		ft = { "go" },
	},
	{
		"<leader>gie",
		"<cmd>GoIfErr<CR>",
		desc = "Go: Add if err",
		ft = { "go" },
	},
	{
		"<leader>gtj",
		"<cmd>GoTestAdd<CR>",
		desc = "Go: Add test for func",
		ft = { "go" },
	},
	{
		"<leader>gta",
		"<cmd>GoTestsAll<CR>",
		desc = "Go: Add all tests",
		ft = { "go" },
	},
	{
		"<leader>gtf",
		"<cmd>GoTestsExp<CR>",
		desc = "Go: Add exported tests",
		ft = { "go" },
	},
	{
		"<leader>gcf",
		"<cmd>GoCmt<CR>",
		desc = "Go: Generate comment",
		ft = { "go" },
	},
	
	-- Utility Functions
	{
		"<leader>z",
		function()
			Snacks.zen()
		end,
		desc = "Toggle Zen Mode",
	},
	{
		"<leader>un",
		function()
			Snacks.notifier.show_history()
		end,
		desc = "Notification History",
	},
	{
		"<leader>x",
		function()
			Snacks.bufdelete()
		end,
		desc = "Delete Buffer",
	},
	{
		"<leader>r",
		function()
			Snacks.rename.rename_file()
		end,
		desc = "Rename File",
	},
	{
		"<leader>gg",
		function()
			Snacks.lazygit()
		end,
		desc = "Lazygit",
	},
	-- Terminal (ergonomic keys)
	{
		"<leader>t",
		function()
			Snacks.terminal()
		end,
		desc = "Toggle Terminal",
	},
	-- Keymap Cheatsheet
	{
		"<leader>?",
		function()
			local lines = {
				"",
				"                      â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"                      â”‚    ğŸš€ NEOVIM KEYMAP CHEATSHEET       â”‚",
				"                      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
				"",
				"â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"â”‚                              ğŸ“ CORE NAVIGATION                             â”‚",
				"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
				"â”‚                                                                             â”‚",
					"â”‚   <leader>f  Smart Find Files      <leader>n  Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· File Explorer      â”‚",
				"â”‚   <leader>b  Buffers               <leader>t  Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Terminal           â”‚",
				"â”‚   <leader>g  Live Grep             <A-e>      Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Float Terminal     â”‚",
				"â”‚   <S-h/l>    Prev/Next Buffer      <leader>x  Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Delete Buffer      â”‚",
				"â”‚   <S-j/k>    Move Buffer Up/Down   <Tab/S-Tab>           Next/Prev Tab      â”‚",
				"â”‚                                                                             â”‚",
				"â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
				"â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"â”‚                              ğŸ” FIND & SEARCH                               â”‚",
				"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
				"â”‚                                                                             â”‚",
				"â”‚   <leader>ff Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Find Files            <leader>sw Search Word        â”‚",
				"â”‚   <leader>fr Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Recent Files          <leader>sl Search Lines       â”‚",
				"â”‚   <leader>fc Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Find Config Files     <leader>sh Help Pages         â”‚",
				"â”‚   <leader>fg Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Find Git Files        <leader>sM All Manuals        â”‚",
				"â”‚   <leader>sd Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Diagnostics           <leader>sk Keymaps            â”‚",
				"â”‚   <leader>sr Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Resume Search                                        â”‚",
				"â”‚                                                                             â”‚",
				"â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
				"â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"â”‚                              ğŸŒ¿ GIT OPERATIONS                              â”‚",
				"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
				"â”‚                                                                             â”‚",
					"â”‚   <leader>gg Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Lazygit               <leader>gs Â·Â·Â· Git Status     â”‚",
				"â”‚   <leader>gb Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Git Branches          <leader>gd Â·Â·Â· Git Diff       â”‚",
				"â”‚   <leader>gl Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Git Log               <leader>gf Â·Â·Â· Git Log File   â”‚",
					"â”‚                                                                             â”‚",
				"â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
				"â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"â”‚                           ğŸ”§ LSP & CODE NAVIGATION                          â”‚",
				"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
				"â”‚                                                                             â”‚",
				"â”‚   gd         Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Go to Definition      <leader>rn     Rename Symbol  â”‚",
				"â”‚   gr         Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Go to References      <leader>ca     Code Action    â”‚",
				"â”‚   gi         Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Go to Implementation  K              Hover Docs     â”‚",
				"â”‚   gy         Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Go to Type Definition gm             Go to Manual    â”‚",
				"â”‚   <leader>ls Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Doc Symbols           <leader>lw     Workspace Sym   â”‚",
				"â”‚   ]] / [[    Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Next/Prev Reference                                   â”‚",
				"â”‚                                                                             â”‚",
				"â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
				"â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"â”‚                            âš¡ DIAGNOSTICS & ERRORS                          â”‚",
				"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
				"â”‚                                                                             â”‚",
				"â”‚   <leader>j  Â·Â·Â·Â·Â·Â·Â·Â·Â· Next Diagnostic       <leader>dd Â·Â·Â· Show Diagnostic â”‚",
				"â”‚   <leader>k  Â·Â·Â·Â·Â·Â·Â·Â·Â· Previous Diagnostic   <leader>q  Â·Â·Â· Quickfix List   â”‚",
				"â”‚                                                                             â”‚",
				"â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
				"â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"â”‚                             ğŸªŸ WINDOW MANAGEMENT                            â”‚",
				"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
				"â”‚                                                                             â”‚",
				"â”‚   <C-h/l>    Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Focus Left/Right      <C-A-h/l>      Resize Width   â”‚",
				"â”‚   <C-j/k>    Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Focus Up/Down         <C-A-j/k>      Resize Height  â”‚",
				"â”‚                                                                             â”‚",
				"â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
				"â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"â”‚                             ğŸš€ GO DEVELOPMENT                               â”‚",
				"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
				"â”‚                                                                             â”‚",
				"â”‚   <leader>db Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Debug Breakpoint      <leader>gsj Â·Â· Add JSON Tags   â”‚",
				"â”‚   <leader>dc Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Debug Continue        <leader>gsy Â·Â· Add YAML Tags   â”‚",
				"â”‚   <leader>di Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Debug Step Into       <leader>gst Â·Â· Remove Tags     â”‚",
				"â”‚   <leader>do Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Debug Step Over       <leader>gie Â·Â· Add if err      â”‚",
				"â”‚   <leader>dgt Â·Â·Â·Â·Â·Â·Â·Â·Â· Debug Go Test         <leader>gtj Â·Â· Add Test        â”‚",
				"â”‚   <leader>dgl Â·Â·Â·Â·Â·Â·Â·Â·Â· Debug Last Test       <leader>gcf Â·Â· Generate Commentâ”‚",
				"â”‚                                                                             â”‚",
				"â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
				"â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"â”‚                            ğŸ¯ UTILITIES & SPECIAL                           â”‚",
				"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤",
				"â”‚                                                                             â”‚",
				"â”‚   <leader>z  Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Toggle Zen Mode       <leader>r  Â·Â·Â· Rename File    â”‚",
					"â”‚   <leader>un Â·Â·Â·Â·Â·Â·Â·Â·Â· Notification History  <leader>h  Â·Â· Command History â”‚",
				"â”‚   <leader>?  Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· This Cheatsheet       <leader>K  Â·Â·Â· All Keymaps    â”‚",
				"â”‚   <Esc>      Â·Â·Â·Â·Â·Â·Â·Â·Â·Â· Clear Search          gc        Â·Â·Â·Â· Comment Lines  â”‚",
				"â”‚                                                                             â”‚",
				"â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
				"",
				"                       â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®",
				"                       â”‚   Press 'q' or <Esc> to close  â”‚",
				"                       â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯",
				"",
			}

			-- Create a buffer with the content
			local buf = vim.api.nvim_create_buf(false, true)
			vim.api.nvim_buf_set_lines(buf, 0, -1, false, lines)
			vim.bo[buf].filetype = "text"
			vim.bo[buf].modifiable = false

			-- Define highlight groups for better visuals
			local ns = vim.api.nvim_create_namespace("cheatsheet")

			-- Apply highlights after buffer is created
			vim.schedule(function()
				-- Title highlights
				vim.api.nvim_buf_add_highlight(buf, ns, "Title", 2, 22, 60)

				-- Section headers
				local section_lines = { 7, 19, 30, 39, 49, 57, 65 }
				for _, line in ipairs(section_lines) do
					vim.api.nvim_buf_add_highlight(buf, ns, "Function", line, 0, -1)
				end

				-- Key bindings highlighting
				for i = 0, vim.api.nvim_buf_line_count(buf) - 1 do
					local line_text = vim.api.nvim_buf_get_lines(buf, i, i + 1, false)[1] or ""

					-- Highlight key bindings (left side)
					local key_pattern = "â”‚   ([^Â·]+)Â·Â·"
					local key_match = line_text:match(key_pattern)
					if key_match then
						local key_start = line_text:find(key_match, 5)
						if key_start then
							vim.api.nvim_buf_add_highlight(
								buf,
								ns,
								"Keyword",
								i,
								key_start - 1,
								key_start + #key_match - 1
							)
						end
					end

					-- Highlight key bindings (right side)
					local right_key_start = line_text:find("<[^>]*>", 40)
					if right_key_start then
						local right_key_end = line_text:find(">", right_key_start) + 1
						vim.api.nvim_buf_add_highlight(buf, ns, "Keyword", i, right_key_start - 1, right_key_end - 1)
					end

					-- Highlight leader key specifically
					for leader_match in line_text:gmatch("<leader>") do
						local leader_start = line_text:find("<leader>", 1)
						while leader_start do
							vim.api.nvim_buf_add_highlight(buf, ns, "Special", i, leader_start - 1, leader_start + 7)
							leader_start = line_text:find("<leader>", leader_start + 1)
						end
					end

					-- Highlight dotted separators
					for dot_start, dot_end in line_text:gmatch("()Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·()") do
						vim.api.nvim_buf_add_highlight(buf, ns, "Comment", i, dot_start - 1, dot_end - 1)
					end
				end

				-- Border highlights
				for i = 0, vim.api.nvim_buf_line_count(buf) - 1 do
					local line_text = vim.api.nvim_buf_get_lines(buf, i, i + 1, false)[1] or ""
					-- Main borders
					if line_text:match("^â•­") or line_text:match("^â”œ") or line_text:match("^â•°") then
						vim.api.nvim_buf_add_highlight(buf, ns, "FloatBorder", i, 0, -1)
					end
					-- Title borders
					if
						line_text:match("^                      â•­") or line_text:match("^                      â•°")
					then
						vim.api.nvim_buf_add_highlight(buf, ns, "Title", i, 0, -1)
					end
					-- Footer borders
					if
						line_text:match("^                       â•­") or line_text:match("^                       â•°")
					then
						vim.api.nvim_buf_add_highlight(buf, ns, "WarningMsg", i, 0, -1)
					end
				end
			end)

			-- Open in a centered floating window
			Snacks.win({
				buf = buf,
				width = 0.85,
				height = 0.92,
				border = "rounded",
				title = " Keymap Cheatsheet ",
				title_pos = "center",
				wo = {
					wrap = false,
					signcolumn = "no",
					number = false,
					relativenumber = false,
					cursorline = false,
					colorcolumn = "",
				},
				keys = {
					q = "close",
					["<Esc>"] = "close",
					["<C-c>"] = "close",
				},
			})
		end,
		desc = "Enhanced Keymap Cheatsheet",
	},
	-- All Keymaps (including built-in Vim)
	{
		"<leader>K",
		function()
			Snacks.picker.keymaps()
		end,
		desc = "All Keymaps (Searchable)",
	},
	-- Word navigation (keep existing)
	{
		"]]",
		function()
			Snacks.words.jump(vim.v.count1)
		end,
		desc = "Next Reference",
		mode = { "n", "t" },
	},
	{
		"[[",
		function()
			Snacks.words.jump(-vim.v.count1)
		end,
		desc = "Prev Reference",
		mode = { "n", "t" },
	},
}

return keys
